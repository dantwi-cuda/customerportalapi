| ID       | Title                          | User Story                                                                                           | Acceptance Criteria / Expected Outcome                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|----------|--------------------------------|------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **FR001** | User Authentication            | As a visitor (customer or CCI), I want to log in so I can access the portal.                         | - **Customer login** via `https://{customer-subdomain}.urlist.com`.<br>- **CCI login** via `https://urlist.com`.<br>- Options: 1) Username & password; 2) SSO (Azure AD, Google, or custom IdP configured per subdomain).<br>- "Forgot password" flow required.<br>- **MFA** optional for customers (opt‑in toggle) and required for CCI-admins.<br>- Invalid credentials display inline error.                                                                                                                                                                                                                                   |
| **FR002** | Admin Menu                     | As an admin, I want to manage my organization so I can control users, workspaces, and data.          | - Visible only to users with role `admin` in session.<br>- Menu items: Users, Workspaces, Report Categories, Reports, Shops, Customers. Admin users see all the standard menus too.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **FR004** | Standard & CCI‑Staff Menus     | As a non‑admin user (customer‑staff or CCI‑staff), I want only my permitted menus so I can perform tasks. | - **Non-admin users**: menus scoped to their tenant session. Items: Shop KPI (Properties, Goals), Accounting (Chart of Accounts, Upload GL), Subscriptions, Reports, Dashboard.<br>- The standard menu is only available when you log in to a customer portal or from an admin portal you click on a customer to log in to their portal.                                                                                                                                                                                                                                                                           |
| **FR005** | Manage Users                   | As an admin, I want to add/edit users & roles so I can control access.                               | - Users table: Name, Email, Role(s), Status, Flags: `CustomerUser` or `CCIUser`.<br>- **Customer‑admins**: manage only users where `CustomerUser = true` and matching subdomain.<br>- **CCI‑admins**: manage all users (CCI and customer).<br>- Create/Edit dialogs: assign roles (built‑in or custom), toggle flags, attach user to one or more customers.<br>- Inline validation (email format, required fields).                                                                                                                                                                                                 |
| **FR006** | Manage Workspaces              | As a customer‑admin, I want to add/edit workspaces so I can organize resources.                      | - Table: Workspace ID, Name, System Name, Active Flag.<br>- Add/Edit form with validation.<br>- Role-based assignment: workspaces assignable to roles or users.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **FR007** | Manage Report Categories       | As a customer‑admin, I want to add/edit categories so I can group reports logically.                 | - Paginated list: Name, System Name, Workspace, Active Flag.<br>- Add/Edit with confirmation. Roles/users assignment possible.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **FR008** | Manage Reports                 | As a customer‑admin, I want to bulk or individually approve, disable, categorize, assign, and edit reports. | - Reports table: Display Name, Original Name, Category, Status, Assigned Users/Roles, Approved Flag.<br>- Bulk actions: Approve, Disable (audit‑logged), Change Category, Assign to Users/Roles.<br>- Single‑report edit: fields include Display Name, Description, Category.<br>- Pagination + per‑page selector.<br>- **Audit logs** for all bulk operations.                                                                                                                                                                                                                                                     |
| **FR009** | Manage Shops                   | As a customer‑admin, I want to search, activate/deactivate, assign users/roles/programs, and CRUD shops. | - Shops table: ID, Name, Source, Postal Code, City, State, Country, Programs Count, Active Flag.<br>- Search/filter: text on Name, City, State, Program names; date range filters optional.<br>- Index on searchable columns for performance.<br>- Assign Users/Roles/Programs via multi‑select.<br>- CRUD modals with validation.                                                                                                                                                                                                                                                                                 |
| **FR010** | Run Reports                    | As any user, I want to browse, search, and launch embedded Power BI reports so I can analyze data.   | - Gallery view: filters by workspace, category, text search.<br>- Launch opens embedded Power BI iframe.<br>- Report metadata: Workspace, Name, Description.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **FR011** | Portal Access to Customer Tenants | As a CCI user (admin or non-admin), I want to access customer portals from the CCI portal without re-authentication, so I can manage or support customer environments efficiently. | - **Access Mechanism**: From the CCI portal, users can click on a customer to access their portal.<br>- **Admin Users**: CCI-admins can access any customer portal.<br>- **Non-Admin Users**: CCI non-admins can only access customer portals through the CCI portal; direct login is not permitted.<br>- **Seamless Authentication**: Users are not required to re-authenticate when accessing a customer portal through the CCI portal; session is securely passed through.<br>- **Audit Logging**: All activities performed within the customer portal by CCI users (admin and non-admin) are logged, capturing the acting user's identity, timestamp, and actions performed.<br>- **Session Management**: An explicit "End Session" option is available to terminate the customer portal session and return to the CCI portal.<br>- **Security Compliance**: The system ensures that access permissions are enforced, and unauthorized access is prevented. |
| **FR012** | Maintain Customer Details      | As a portal‑admin, I want to edit customer profiles, BI credentials, and portal branding.            | - Sections: Customer Info (Name, Legal Name, Domain URL, Active Flag), BI Credentials (User, Password), UI Customization (Display Titles, Logo, Background, Favicon).<br>- Preview of branding changes before save.                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **FR013** | Dashboard                      | As any user, I want a KPI dashboard showing sales, revenue, counts, and a map so I can monitor performance. | - Top‑cards: Store Count, YTD Revenue, Growth% (via `RoReports` SP), RO Count (via `RoReports`).<br>- Table: Shops with Sales, RO Count, Labor $ & Hours.<br>- Map heat‑overlay of sales by shop location.<br>- Data refresh real‑time or hourly.                                                                                                                                                                                                                                                                                                                                                                                                       |
| **FR020** | Role Management UI             | As an admin, I want to create and assign custom roles so I can tailor permissions.                   | - New "Roles" section under Manage Users.<br>- CRUD roles: name, permissions matrix.<br>- Assign roles to users or workspaces.<br>- Roles stored in the database and assignable to users or resources.<br>- Role-based access control (RBAC) implemented to ensure users have appropriate access based on their roles.                                                                                                                                                                                                                                                                                                                                   |